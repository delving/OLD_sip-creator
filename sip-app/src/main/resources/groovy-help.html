<html>
<body>
<h2>Groovy Help</h2>

<hr/>
<b>Editable Code</b><br/>
<p>
    With the SIP-Creator you are mapping a tree structure to another tree structure, which involves both mapping
    branches to branches and leaves to leaves.  The only code that you are able to edit is the code which generates
    values for the content of leaves.  When a branch-branch mapping is shown here, the code that is generated produces
    output which shows how the branching will be structured, and also shows how many times the output will be
    created for the current record in the input.
</p>

<hr/>
<b>Field Output Code</b><br/>
<p>
    The editable sections of code for generating leaf content each consist of the content of one programming
    construct called a "closure".  The code for the entire mapping includes these sections each within their own
    pair of braces, so you edit only what is within the braces.  A closure is a piece of code which has access
    to the variables in its context, and the value that it returns is the value of the final statement although
    this might of course be the only statement in the closure.
</p>

<hr/>
<b>Output values</b><br/>
<p>
    The last statement of the closure will produce output if it produces an object which can be properly turned
    into a string.  A number of examples are shown here:
</p>
<br>
<pre>
    'This is a constant string'
    "This is a GString with a ${value} substituted inside of it" // useful for building URLs etc
    it // a "node"
    anObject // with a proper toString() method
</pre>

<hr/>
<b>Attribute values</b><br/>
<p>
    When you generate a value for an attribute, there is of course only one value needed since an attribute
    can only appear once.  If multiple values are created anyway, their string values are concatenated.
</p>

<hr/>
<b>Multiple Values</b><br/>
<p>
    The return value of the editable closures can be either single objects which can be turned into strings, or
    arrays of such objects.  When an array of objects is returned, there is one output section created for
    each member of the array.  An array is constructed like this:
</p>
<br>
<pre>
    [
    'value one',
    "value two with ${value} substituted",
    anObject
    ]
</pre>
<br/>

<hr/>
<b>Dictionary values</b><br/>
<p>
    When the mapping is supposed to convert a quite large number of different values to a small controlled
    list of values, it becomes cumbersome to do that work in code.  For this, the SIP-Creator has a dictionary
    mapping, and a refined user interface to accelerate the process of building the dictionary.  Dictionaries
    are created with very unique names, and the Groovy code remaining is only a lookup command.
</p>

<hr/>
<b>Functions</b><br/>
<p>
    Frequently performed operations are tedious to maintained if they have to be copied and pasted in a number
    of places, so the SIP-Creator allows you to build and test functions that can then be used in the mapping
    code.  The functions correspond with the contents of a closure, just like the field output code.  Building a
    function is always accompanied by an easy test process, where you can give a group of input values and
    verify that the output is what you expect.  The input values should be a number of interesting values
    which the function is expected to manipulate, and they are saved in the mapping as documentation of what
    the function is supposed to accept.
</p>

<hr/>

</body>
</html>