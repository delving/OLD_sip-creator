<?xml version="1.0"?>
<record-definition prefix="ese">
    <namespaces>
        <namespace prefix="dc" uri="http://purl.org/dc/elements/1.1/" schema="http://dublincore.org/schemas/xmls/qdc/dc.xsd"/>
        <namespace prefix="dcterms" uri="http://purl.org/dc/terms/" schema="http://dublincore.org/schemas/xmls/qdc/dcterms.xsd"/>
        <namespace prefix="europeana" uri="http://www.europeana.eu/schemas/ese/" schema="http://www.europeana.eu/schemas/ese/ESE-V3.3.xsd"/>
        <namespace prefix="ese" uri="http://www.europeana.eu/schemas/ese/" schema="http://www.europeana.eu/schemas/ese/ESE-V3.3.xsd"/>
        <namespace prefix="abm" uri="http://abmu.org/abm" schema="http://abmu.org/abm.xsd"/>
    </namespaces>
    <root localName="record">
        <field prefix="dc" localName="contributor" searchField="who,creator"/>
        <field prefix="dc" localName="coverage" searchField="what,subject"/>
        <field prefix="dc" localName="creator" searchField="who,creator"/>
        <field prefix="dc" localName="date" searchField="when,date"/> <!--removed extract year it doesn't belong here -->
        <field prefix="dc" localName="description" searchField="description"/>
        <field prefix="dc" localName="format"/>
        <field prefix="dc" localName="identifier" searchField="identifier"/>
        <field prefix="dc" localName="language"/>
        <field prefix="dc" localName="publisher"/>
        <field prefix="dc" localName="relation" searchField="relation"/>
        <field prefix="dc" localName="rights"/>
        <field prefix="dc" localName="source"/>
        <field prefix="dc" localName="subject" facetName="subject" searchField="what,subject"/>
        <field prefix="dc" localName="title"/>
        <field prefix="dc" localName="type" facetPrefix="type"/>
        <field prefix="dcterms" localName="alternative"/>
        <field prefix="dcterms" localName="conformsTo"/>
        <field prefix="dcterms" localName="created" searchField="when,date"/>
        <field prefix="dcterms" localName="extent" searchField="format"/>
        <field prefix="dcterms" localName="hasFormat" searchField="relation"/>
        <field prefix="dcterms" localName="hasPart" searchField="relation"/>
        <field prefix="dcterms" localName="hasVersion" searchField="relation"/>
        <field prefix="dcterms" localName="isFormatOf"/>
        <field prefix="dcterms" localName="isPartOf"/>
        <field prefix="dcterms" localName="isReferencedBy" searchField="relation"/>
        <field prefix="dcterms" localName="isReplacedBy" searchField="relation"/>
        <field prefix="dcterms" localName="isRequiredBy" searchField="relation"/>
        <field prefix="dcterms" localName="isVersionOf"/>
        <field prefix="dcterms" localName="issued" searchField="date"/>
        <field prefix="dcterms" localName="medium" searchField="format"/>
        <field prefix="dcterms" localName="provenance"/>
        <field prefix="dcterms" localName="references"/>
        <field prefix="dcterms" localName="replaces" searchField="relation"/>
        <field prefix="dcterms" localName="requires" searchField="relation"/>
        <field prefix="dcterms" localName="spatial" searchField="where,location,subject"/>
        <field prefix="dcterms" localName="tableOfContents" searchField="description"/>
        <field prefix="dcterms" localName="temporal" searchField="what,subject"/>
        <field prefix="europeana" localName="collectionName" systemField="true" fulldoc="false" factName="name"/>
        <field prefix="europeana" localName="collectionTitle" systemField="true" fulldoc="false" factName="name"/>
        <field prefix="europeana" localName="country" systemField="true" fulldoc="false" factName="country"/>
        <field prefix="europeana" localName="dataProvider" facetPrefix="dapr" systemField= "true" fulldoc="true"
               briefdoc="true" factName="dataProvider"/>
        <field prefix="europeana" localName="isShownAt" fulldoc="true" fieldType="string"/>
        <field prefix="europeana" localName="isShownBy" fulldoc="true" fieldType="string"/>
        <field prefix="europeana" localName="language" fieldType="string" facetName="language" searchField="language" factName="language"/>
        <field prefix="europeana" localName="object" briefdoc="true"/>
        <field prefix="europeana" localName="provider" facetPrefix="prov" facetName="provider" factName="provider"/>
        <field prefix="europeana" localName="rights" factName="rights"/>
        <field prefix="europeana" localName="source"/> <!-- to be deleted is unused -->
        <field prefix="europeana" localName="type" fieldType="string" facetPrefix="tp" facetName="type" factName="type"/>
        <field prefix="europeana" localName="unstored" fieldType="text" fulldoc="false"/>
        <field prefix="europeana" localName="uri" briefdoc="true" identifierField="true">
                <converter call=".toId(spec)"/>
        </field>
        <field prefix="europeana" localName="userTag" searchField="usertags"/>
        <field prefix="europeana" localName="year" fulldoc="false" fieldType="string" facetPrefix="year">
            <converter multipleOutput="true" call=".extractYear()"/>
        </field>
    </root>
    <views>
        <view name="brief">
            <view-field name="creator" prefix="dc" localName="creator"/>
            <view-field name="description">
                <field-ref localName="description"/>
            </view-field>
            <view-field name="language">
                <field-ref prefix="europeana" localName="language"/>
                <field-ref prefix="dc" localName="language"/>
            </view-field>
        </view>
        <view name="full">
            <view-field name="creator" prefix="dc" localName="creator"/>
            <view-field name="description">
                <field-ref localName="description"/>
            </view-field>
            <view-field name="language">
                <field-ref prefix="europeana" localName="language"/>
                <field-ref prefix="dc" localName="language"/>
            </view-field>
        </view>
    </views>
    <validation>
        assert record.'europeana:collectionTitle'
        assert record.'europeana:country'
        assert record.'europeana:dataProvider'
        assert record.'europeana:provider'
        assert record.'europeana:language'
        assert record.'europeana:rights'
        assert record.'europeana:type'
        assert record.'europeana:uri'
        assert record.'europeana:isShownAt' || record.'europeana:isShownBy'
    </validation>
</record-definition>